@using AnimeFeedManager.Web.Features.Admin.Base

<SeasonalUpdate ViewModel="@ViewModel"
                FormName="@FormName"
                Title="Update Seasonal Anime"
                hx-swap="outerHTML"
                hx-put="/admin/tv/season"
                hx-confirm="Do you want to updated the selected TV season?">>
</SeasonalUpdate>

@code {

    private const string FormName = "tv-seasonal-update-form";

    // [SupplyParameterFromForm(FormName = FormName, Name = "")]
    [Parameter]
    public BySeasonViewModel ViewModel { get; set; } = BySeasonViewModel.Current;

    public static RenderFragment AsRenderFragment(BySeasonViewModel viewModel) =>
        builder =>
        {
            builder.OpenComponent<TvSeasonalUpdate>(1);
            builder.AddAttribute(2, nameof(ViewModel), viewModel);
            builder.CloseComponent();
        };


    public static RenderFragment OkNotificationContent(BySeasonViewModel viewModel) =>
        builder =>
        {
            builder.AddContent(0, "Season ");
            builder.OpenElement(1, "b");
            builder.AddContent(2, $"{viewModel.Year}-{viewModel.Season}");
            builder.CloseElement();
            builder.AddContent(3, " will be processed in the background");
        };


}