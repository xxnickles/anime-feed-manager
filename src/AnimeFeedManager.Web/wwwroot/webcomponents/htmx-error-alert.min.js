class e extends HTMLElement{constructor(){super(),this.alertContainer=null,this.alertCounter=0,this.htmxRetryCount=0,this.maxHtmxRetries=5,this.retryDelay=1e3,this.errorMessages={400:{title:"Bad Request",message:"The request could not be understood by the server"},401:{title:"Unauthorized",message:"Authentication is required"},403:{title:"Forbidden",message:"Access to this resource is forbidden"},404:{title:"Not Found",message:"The requested resource was not found"},409:{title:"Conflict",message:"The request could not be completed due to a conflict"},422:{title:"Validation Error",message:"The request contains invalid data"},429:{title:"Too Many Requests",message:"Please slow down and try again later"},500:{title:"Server Error",message:"An internal server error occurred"},502:{title:"Bad Gateway",message:"The server received an invalid response"},503:{title:"Service Unavailable",message:"The server is temporarily unavailable"},504:{title:"Gateway Timeout",message:"The server did not respond in time"},timeout:{title:"Request Timeout",message:"The request took too long to complete"},networkError:{title:"Connection Failed",message:"Could not connect to the server"},default:{title:"Request Error",message:"An error occurred while processing your request"}}}connectedCallback(){let e=this.getAttribute("attach-to")||"body";this.maxHtmxRetries=parseInt(this.getAttribute("max-retries")||"5",10),this.retryDelay=parseInt(this.getAttribute("retry-delay")||"1000",10),(isNaN(this.maxHtmxRetries)||this.maxHtmxRetries<0)&&(console.warn("DaisyHTMXAlerts: Invalid max-retries value, using default (5)"),this.maxHtmxRetries=5),(isNaN(this.retryDelay)||this.retryDelay<0)&&(console.warn("DaisyHTMXAlerts: Invalid retry-delay value, using default (1000ms)"),this.retryDelay=1e3),this.loadCustomMessages(),this.alertContainer=document.querySelector(e),this.alertContainer||(console.warn(`DaisyHTMXAlerts: Could not find element "${e}", defaulting to body`),this.alertContainer=document.body),this.setupHTMXListeners()}setupHTMXListeners(){if("undefined"==typeof htmx)return(this.htmxRetryCount++,this.htmxRetryCount<=this.maxHtmxRetries)?(console.warn(`DaisyHTMXAlerts: HTMX is not loaded! Retry attempt ${this.htmxRetryCount}/${this.maxHtmxRetries}...`),setTimeout(()=>this.setupHTMXListeners(),this.retryDelay),void 0):void console.error(`DaisyHTMXAlerts: HTMX could not be loaded after ${this.maxHtmxRetries} attempts. Alerts will not work.`);document.body.addEventListener("htmx:responseError",e=>{let t=e.detail.xhr?.status,s=this.getRequestUrl(e.detail),r=this.errorMessages[t]||{title:this.errorMessages.default.title,message:`${this.errorMessages.default.message} (Status: ${t})`};this.createAlert("error",r.title,r.message,s)}),document.body.addEventListener("htmx:sendError",e=>{let t=this.getRequestUrl(e.detail),s=this.errorMessages.networkError;this.createAlert("error",s.title,s.message,t)}),document.body.addEventListener("htmx:timeout",e=>{let t=this.getRequestUrl(e.detail),s=this.errorMessages.timeout;this.createAlert("warning",s.title,s.message,t)})}loadCustomMessages(){let e=this.getAttribute("messages-config");if(e)try{if(e.startsWith("{")){let t=JSON.parse(e);this.errorMessages={...this.errorMessages,...t}}else if(e.startsWith("#")){let t=document.querySelector(e);if(t&&"application/json"===t.type){let e=JSON.parse(t.textContent);this.errorMessages={...this.errorMessages,...e}}}}catch(e){console.error("DaisyHTMXAlerts: Failed to load custom messages",e)}}setCustomMessages(e){this.errorMessages={...this.errorMessages,...e}}getErrorMessages(){return{...this.errorMessages}}getRequestUrl(e){return e.pathInfo?.requestPath||e.elt?.getAttribute("hx-get")||e.elt?.getAttribute("hx-post")||e.elt?.getAttribute("hx-put")||e.elt?.getAttribute("hx-delete")||e.elt?.getAttribute("hx-patch")||"Unknown URL"}createAlert(e,t,s,r){let i=`daisy-htmx-alert-${++this.alertCounter}`,a=document.createElement("div");a.id=i,a.setAttribute("role","alert"),a.className=`alert alert-${e} shadow-lg`,a.style.transition="opacity 300ms ease-in-out",a.style.opacity="0";let o=this.getIcon(e);a.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
                ${o}
            </svg>
            <section>
                <h3 class="font-bold">${this.escapeHtml(t)}</h3>
                <p class="text-xs">${this.escapeHtml(s)}</p>
                <small class="text-xs opacity-50" style="margin-top: 0.25rem;">URL: ${this.escapeHtml(r)}</small>
            </section>
            <button class="btn btn-sm" onclick="document.querySelector('daisy-htmx-alerts').dismissAlert('${i}')">
                Dismiss
            </button>
        `,this.alertContainer.appendChild(a),requestAnimationFrame(()=>{a.style.opacity="1"})}dismissAlert(e){let t=document.getElementById(e);t&&(t.style.opacity="0",setTimeout(()=>{t.remove()},300))}getIcon(e){let t={error:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />',warning:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />',info:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>',success:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />'};return t[e]||t.info}escapeHtml(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}showAlert(e,t,s,r="Manual trigger"){this.createAlert(e,t,s,r)}clearAllAlerts(){this.alertContainer.querySelectorAll('[id^="daisy-htmx-alert-"]').forEach(e=>e.remove())}}customElements.define("daisy-htmx-alerts",e);