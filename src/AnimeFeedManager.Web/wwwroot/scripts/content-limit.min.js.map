{"version":3,"sources":["wwwroot/scripts/content-limit.js"],"sourcesContent":["(() => {\n    const pluginName = \"content-limit\";\n\n    function plugin_default(Alpine) {\n        const allowedTypes = [\"text\", \"password\", \"email\", \"number\", \"url\", \"search\", \"tel\"];\n        Alpine.directive(pluginName, (el, { modifiers, expression }, { evaluateLater, effect, cleanup }) => {\n            if (el.tagName !== \"INPUT\" && el.tagName !== \"TEXTAREA\") {\n                console.warn(`[${pluginName}]: The directive \"content-limit\" can only be used on <input> or <textarea> elements.`);\n                return;\n            }\n            if (el.tagName === \"INPUT\" && !allowedTypes.includes(el.type)) {\n                console.warn(`[${pluginName}]: The directive \"content-limit\" can only be used on <input> elements with type \"text\", \"password\", \"email\", \"number\", \"url\", \"search\" or \"tel\".`);\n                return;\n            }\n            const evaluateParams = evaluateLater(expression);\n            let listenersToCleanUp = [];\n            effect(() => {\n                evaluateParams((params) => {\n                    params = params || {};\n                    try {\n                        if (params.regex) {\n                            params.regex = new RegExp(params.regex);\n                        }\n                    } catch (e) {\n                        console.error(`[${pluginName}] : Invalid regular expression has been provided in the field with name \"${el.name}\": ${params.regex}`);\n                    }\n                    if (params.length !== void 0 && params.length !== null) {\n                        params.length = parseInt(params.length, 10);\n                        if (isNaN(params.length)) {\n                            console.error(`[x-${pluginName}] : Invalid length value has been provided in the field with name \"${el.name}\". The value must be an integer. Value provided: ${params.length}`);\n                            params.length = void 0;\n                        }\n                    }\n                    const isValid = (char) => {\n                        if (modifiers.includes(\"alphanumeric\")) {\n                            return /[a-zA-Z0-9]/.test(char);\n                        }\n                        if (modifiers.includes(\"numeric\")) {\n                            return /[0-9]/.test(char);\n                        }\n                        if (modifiers.includes(\"regex\") && params.regex) {\n                            return params.regex.test(char);\n                        } else {\n                            console.warn(`[x-${pluginName}] : The directive \"content-limit\" has been used with the \"regex\" modifier but no regular expression has been provided in the field with name \"${el.name}\".`);\n                        }\n                        return true;\n                    };\n                    const enforceConstraints = (value) => {\n                        if (params.length !== void 0) {\n                            value = value.substring(0, params.length);\n                        }\n                        return value;\n                    };\n                    const keypressHandler = (e) => {\n                        if (!isValid(e.key)) {\n                            e.preventDefault();\n                        }\n                    };\n                    el.addEventListener(\"keypress\", keypressHandler, true);\n                    listenersToCleanUp.push(() => el.removeEventListener(\"keypress\", keypressHandler));\n                    const inputHandler = (e) => {\n                        const newValue = enforceConstraints(e.target.value);\n                        if (newValue !== e.target.value) {\n                            e.target.value = newValue;\n                        }\n                    };\n                    el.addEventListener(\"input\", inputHandler, true);\n                    listenersToCleanUp.push(() => el.removeEventListener(\"input\", inputHandler));\n                });\n            });\n            cleanup(() => {\n                listenersToCleanUp.forEach((listener) => listener());\n            });\n        });\n    }\n    \n    document.addEventListener(\"alpine:init\", () => {\n        window.Alpine.plugin(plugin_default);\n    });\n})();"],"names":["pluginName","plugin_default","Alpine","allowedTypes","directive","el","modifiers","expression","evaluateLater","effect","cleanup","tagName","console","warn","includes","type","evaluateParams","listenersToCleanUp","params","regex","RegExp","e","error","name","length","parseInt","isNaN","keypressHandler","char","key","test","preventDefault","addEventListener","push","removeEventListener","inputHandler","value","newValue","target","substring","forEach","listener","document","window","plugin"],"mappings":"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"}