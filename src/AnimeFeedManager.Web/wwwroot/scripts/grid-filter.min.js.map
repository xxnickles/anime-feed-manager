{"version":3,"sources":["wwwroot/scripts/grid-filter.js"],"sourcesContent":["function getItemFilterState(filters) {\n    let items = Array.from(document.querySelectorAll('div#main-grid > section > article footer span.filters'));\n    let showAllItems = filters.length === 0;\n    return items.map(item => {\n        let showItem = showAllItems;\n        if (!showItem) {\n            showItem = filters.every(filter => item.dataset[filter] === 'true');\n        }\n        return {\n            item, showItem\n        };\n    });\n}\n\nfunction gridFilter() {\n    return {\n        filters: [],\n        motionOk: window.matchMedia('(prefers-reduced-motion: no-preference)').matches,\n        toggleFilter(filter) {\n            if (this.filters.includes(filter)) {\n                this.filters = this.filters.filter(f => f !== filter);\n            } else {\n                this.filters = [...this.filters, filter];\n            }\n\n            const state = getItemFilterState(this.filters);\n            const itemsToShow = state.filter(s => s.showItem).length;\n            document.startViewTransition && this.motionOk && (itemsToShow < 20) ? document.startViewTransition(() => this.applyFilters(state)) : this.applyFilters(state);\n        },\n        applyFilters(itemsState) {\n            itemsState.forEach(state => {\n                state.item.closest('article').style.display = state.showItem ? '' : 'none';\n            });\n        }\n    }\n}"],"names":["getItemFilterState","filters","items","Array","from","document","querySelectorAll","showAllItems","length","map","item","showItem","every","filter","dataset","gridFilter","motionOk","window","matchMedia","matches","toggleFilter","includes","f","state","itemsToShow","s","startViewTransition","applyFilters","itemsState","forEach","closest","style","display"],"mappings":"AAAA,SAASA,mBAAmBC,CAAO,EAC/B,IAAIC,EAAQC,MAAMC,IAAI,CAACC,SAASC,gBAAgB,CAAC,0DAC7CC,EAAeN,AAAmB,IAAnBA,EAAQO,MAAM,CACjC,OAAON,EAAMO,GAAG,CAACC,IACb,IAAIC,EAAWJ,EAIf,OAHI,AAACI,GACDA,CAAAA,EAAWV,EAAQW,KAAK,CAACC,GAAUH,AAAyB,SAAzBA,EAAKI,OAAO,CAACD,EAAO,CAAW,EAE/D,CACHH,KAAAA,EAAMC,SAAAA,CACV,CACJ,EACJ,CAEA,SAASI,aACL,MAAO,CACHd,QAAS,EAAE,CACXe,SAAUC,OAAOC,UAAU,CAAC,2CAA2CC,OAAO,CAC9EC,aAAaP,CAAM,EACX,IAAI,CAACZ,OAAO,CAACoB,QAAQ,CAACR,GACtB,IAAI,CAACZ,OAAO,CAAG,IAAI,CAACA,OAAO,CAACY,MAAM,CAACS,GAAKA,IAAMT,GAE9C,IAAI,CAACZ,OAAO,CAAG,IAAI,IAAI,CAACA,OAAO,CAAEY,EAAO,CAG5C,IAAMU,EAAQvB,mBAAmB,IAAI,CAACC,OAAO,EACvCuB,EAAcD,EAAMV,MAAM,CAACY,GAAKA,EAAEd,QAAQ,EAAEH,MAAM,AACxDH,CAAAA,SAASqB,mBAAmB,EAAI,IAAI,CAACV,QAAQ,EAAKQ,EAAc,GAAMnB,SAASqB,mBAAmB,CAAC,IAAM,IAAI,CAACC,YAAY,CAACJ,IAAU,IAAI,CAACI,YAAY,CAACJ,EAC3J,EACAI,aAAaC,CAAU,EACnBA,EAAWC,OAAO,CAACN,IACfA,EAAMb,IAAI,CAACoB,OAAO,CAAC,WAAWC,KAAK,CAACC,OAAO,CAAGT,EAAMZ,QAAQ,CAAG,GAAK,MACxE,EACJ,CACJ,CACJ"}