{"version":3,"sources":["wwwroot/scripts/grid-filter.js"],"sourcesContent":["function getItemFilterState(filters) {\r\n    let items = Array.from(document.querySelectorAll('div#main-grid > section > article footer span.filters'));\r\n    let showAllItems = filters.length === 0;\r\n    return items.map(item => {\r\n        let showItem = showAllItems;\r\n        if (!showItem) {\r\n            showItem = filters.every(filter => item.dataset[filter] === 'true');\r\n        }\r\n        return {\r\n            item, showItem\r\n        };\r\n    });\r\n}\r\n\r\nfunction gridFilter() {\r\n    return {\r\n        filters: [],\r\n        motionOk: window.matchMedia('(prefers-reduced-motion: no-preference)').matches,\r\n        toggleFilter(filter) {\r\n            if (this.filters.includes(filter)) {\r\n                this.filters = this.filters.filter(f => f !== filter);\r\n            } else {\r\n                this.filters = [...this.filters, filter];\r\n            }\r\n\r\n            const state = getItemFilterState(this.filters);\r\n            const itemsToShow = state.filter(s => s.showItem).length;\r\n            document.startViewTransition && this.motionOk && (itemsToShow < 20) ? document.startViewTransition(() => this.applyFilters(state)) : this.applyFilters(state);\r\n        },\r\n        applyFilters(itemsState) {\r\n            itemsState.forEach(state => {\r\n                state.item.closest('article').style.display = state.showItem ? '' : 'none';\r\n            });\r\n        }\r\n    }\r\n}"],"names":["gridFilter","filters","motionOk","window","matchMedia","matches","toggleFilter","filter","items","showAllItems","includes","f","state","Array","from","document","querySelectorAll","length","map","item","showItem","every","dataset","itemsToShow","s","startViewTransition","applyFilters","itemsState","forEach","closest","style","display"],"mappings":"AAcA,SAASA,IACL,MAAO,CACHC,QAAS,EAAE,CACXC,SAAUC,OAAOC,UAAU,CAAC,2CAA2CC,OAAO,CAC9EC,aAAaC,CAAM,MAlBCN,MACpBO,EACAC,EAiBQ,IAAI,CAACR,OAAO,CAACS,QAAQ,CAACH,GACtB,IAAI,CAACN,OAAO,CAAG,IAAI,CAACA,OAAO,CAACM,MAAM,CAACI,GAAKA,IAAMJ,GAE9C,IAAI,CAACN,OAAO,CAAG,IAAI,IAAI,CAACA,OAAO,CAAEM,EAAO,CAG5C,IAAMK,GAzBUX,EAyBiB,IAAI,CAACA,OAAO,CAxBjDO,EAAQK,MAAMC,IAAI,CAACC,SAASC,gBAAgB,CAAC,0DAC7CP,EAAeR,AAAmB,IAAnBA,EAAQgB,MAAM,CAC1BT,EAAMU,GAAG,CAACC,IACb,IAAIC,EAAWX,EAIf,OAHI,AAACW,GACDA,CAAAA,EAAWnB,EAAQoB,KAAK,CAACd,GAAUY,AAAyB,SAAzBA,EAAKG,OAAO,CAACf,EAAO,CAAW,EAE/D,CACHY,KAAAA,EAAMC,SAAAA,CACV,CACJ,IAecG,EAAcX,EAAML,MAAM,CAACiB,GAAKA,EAAEJ,QAAQ,EAAEH,MAAM,AACxDF,CAAAA,SAASU,mBAAmB,EAAI,IAAI,CAACvB,QAAQ,EAAKqB,EAAc,GAAMR,SAASU,mBAAmB,CAAC,IAAM,IAAI,CAACC,YAAY,CAACd,IAAU,IAAI,CAACc,YAAY,CAACd,EAC3J,EACAc,aAAaC,CAAU,EACnBA,EAAWC,OAAO,CAAChB,IACfA,EAAMO,IAAI,CAACU,OAAO,CAAC,WAAWC,KAAK,CAACC,OAAO,CAAGnB,EAAMQ,QAAQ,CAAG,GAAK,MACxE,EACJ,CACJ,CACJ"}