(()=>{let e="form-submit-locker";function t(t){t.directive(e,(i,{modifiers:n,expression:o},{cleanup:r,evaluate:a})=>{var s,l,d;let u,m,c;if("FORM"!==i.tagName)return void console.error(`[x-${e}] Directive must be used on <form> elements only.`);let b={debounceDelay:parseInt(n[0])||300,validateOnMount:!n.includes("no-initial-validation"),disableOnSubmit:n.includes("disable-on-submit"),allowMultipleSubmits:n.includes("allow-multiple-submits"),focusOnError:!n.includes("no-focus-on-error"),changeTextOnSubmit:n.includes("change-text"),customValidator:o?()=>a(o):null},h=Array.from(i.querySelectorAll('button[type="submit"], input[type="submit"], button:not([type])')).filter(e=>{let t=e.getAttribute("type");return"submit"===t||"BUTTON"===e.tagName&&!t});if(h.length>1&&!b.allowMultipleSubmits)return void console.warn(`[x-${e}] Multiple submit buttons detected in form. This often indicates a UX issue that could be better solved with:
- Separate forms for different actions
- A single submit with radio/select for action type
- JavaScript-driven workflow buttons

The form submit locker has been disabled for this form.
If you really need multiple submit buttons, add the 'allow-multiple-submits' modifier:
<form x-${e}.allow-multiple-submits>

Form element:`,i);if(0===h.length)return void console.warn(`[x-${e}] No submit buttons found in form.`);let v=h[0],x=v.disabled;function p(){let t=i.checkValidity();if(b.customValidator)try{let e=b.customValidator();t=t&&e}catch(t){console.error(`[x-${e}] Custom validator error:`,t)}return t}function f(){let e=p();t.nextTick(()=>{x||(v.disabled=!e,e?v.removeAttribute("aria-disabled"):v.setAttribute("aria-disabled","true"))})}i.setAttribute("novalidate",!0);let g=(s=e=>{["INPUT","TEXTAREA"].includes(e.target.tagName)&&f()},l=b.debounceDelay,function(...e){let t=this;clearTimeout(u),u=setTimeout(()=>s.apply(t,e),l)}),y=e=>{"SELECT"===e.target.tagName&&f()},E=e=>{e.target===i&&setTimeout(()=>f(),0)},T=!1;function L(){T&&(T=!1,v.removeAttribute("aria-busy"),b.changeTextOnSubmit&&v.dataset.originalText&&(v.textContent=v.dataset.originalText,delete v.dataset.originalText),f())}let w=e=>{if(p())b.disableOnSubmit&&(i.hasAttribute("hx-post")||i.hasAttribute("hx-put")||i.hasAttribute("hx-patch")||i.hasAttribute("hx-delete")||i.hasAttribute("hx-get")||(T=!0,v.disabled=!0,v.setAttribute("aria-busy","true"),b.changeTextOnSubmit&&"BUTTON"===v.tagName&&!v.dataset.originalText&&(v.dataset.originalText=v.textContent,v.textContent=v.dataset.loadingText||"Submitting...")));else{if(e.preventDefault(),e.stopPropagation(),b.focusOnError){let e=i.querySelector(':invalid:not([type="hidden"]):not([disabled])');e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))}let t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.textContent="Form validation failed. Please check the required fields.",i.appendChild(t),setTimeout(()=>t.remove(),1e3)}},A=e=>{if(e.detail.elt===i||i.contains(e.detail.elt)){let t=e.detail.issueRequest;"function"==typeof t&&(e.detail.issueRequest=function(e){t(e),e||!v.disabled||x||L()})}},S=e=>{(e.detail.elt===i||i.contains(e.detail.elt))&&b.disableOnSubmit&&!T&&(T=!0,v.disabled=!0,v.setAttribute("aria-busy","true"),b.changeTextOnSubmit&&"BUTTON"===v.tagName&&!v.dataset.originalText&&(v.dataset.originalText=v.textContent,v.textContent=v.dataset.loadingText||"Submitting..."))},O=e=>{(e.detail.elt===i||i.contains(e.detail.elt))&&L()},k=e=>{(e.detail.elt===i||i.contains(e.detail.elt))&&T&&L()};(window.htmx||document.querySelector("[hx-boost], [hx-get], [hx-post], [hx-put], [hx-patch], [hx-delete]"))&&(document.body.addEventListener("htmx:confirm",A),document.body.addEventListener("htmx:beforeRequest",S),document.body.addEventListener("htmx:afterRequest",O),document.body.addEventListener("htmx:responseError",O),document.body.addEventListener("htmx:sendError",O),document.body.addEventListener("htmx:halted",k));let q=(d=()=>{setTimeout(()=>f(),100)},c=0,function(...e){let t=this,i=Date.now(),n=500-(i-c);n<=0?(clearTimeout(m),c=i,d.apply(t,e)):m||(m=setTimeout(()=>{c=Date.now(),d.apply(t,e)},n))});i.addEventListener("input",g,!0),i.addEventListener("change",y,!0),i.addEventListener("reset",E,!0),i.addEventListener("submit",w,!0),window.addEventListener("popstate",q),b.validateOnMount&&t.nextTick(()=>f());let N=()=>{L()},C=()=>{L()};i.addEventListener("ajax:success",N),i.addEventListener("ajax:error",C),i.addEventListener("submit:success",N),i.addEventListener("submit:error",C),i._formSubmitLocker={validate:()=>p(),evaluateSubmit:()=>f(),reset:()=>{i.reset(),f()},unlock:()=>L()},r(()=>{i.removeEventListener("input",g,!0),i.removeEventListener("change",y,!0),i.removeEventListener("reset",E,!0),i.removeEventListener("submit",w,!0),window.removeEventListener("popstate",q),(window.htmx||document.querySelector("[hx-boost], [hx-get], [hx-post], [hx-put], [hx-patch], [hx-delete]"))&&(document.body.removeEventListener("htmx:confirm",A),document.body.removeEventListener("htmx:beforeRequest",S),document.body.removeEventListener("htmx:afterRequest",O),document.body.removeEventListener("htmx:responseError",O),document.body.removeEventListener("htmx:sendError",O),document.body.removeEventListener("htmx:halted",k)),i.removeEventListener("ajax:success",N),i.removeEventListener("ajax:error",C),i.removeEventListener("submit:success",N),i.removeEventListener("submit:error",C),void 0!==x&&(v.disabled=x),b.changeTextOnSubmit&&v.dataset.originalText&&(v.textContent=v.dataset.originalText,delete v.dataset.originalText),delete i._formSubmitLocker})})}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(t)}),window.Alpine&&window.Alpine.plugin(t)})();