{"version":3,"sources":["wwwroot/scripts/hx-signalr.js"],"sourcesContent":["/*\r\nSignalR Extension\r\n============================\r\nThis extension adds support for SignalR to htmx.\r\nBased on WebSockets extension (https://github.com/bigskysoftware/htmx/blob/master/src/ext/ws.js)\r\nand SSE extension (https://github.com/bigskysoftware/htmx/blob/master/src/ext/sse.js)\r\nby bigskysoftware.\r\n*/\r\n\r\n(function () {\r\n\r\n    /** @type {import(\"../htmx\").HtmxInternalApi} */\r\n    var api;\r\n\r\n    var signalRConnect = \"signalr-connect\";\r\n    var signalRSubscribe = \"signalr-subscribe\";\r\n    var signalRSend = \"signalr-send\";\r\n\r\n    htmx.defineExtension(\"signalr\", {\r\n\r\n        /**\r\n         * init is called once, when this extension is first registered.\r\n         * @param {import(\"../htmx\").HtmxInternalApi} apiRef\r\n         */\r\n        init: function (apiRef) {\r\n\r\n            // Store reference to internal API\r\n            api = apiRef;\r\n\r\n            // Default function for creating new EventSource objects\r\n            if (htmx.createHubConnection == undefined) {\r\n                htmx.createHubConnection = createHubConnection;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * onEvent handles all events passed to this extension.\r\n         *\r\n         * @param {string} name\r\n         * @param {Event} evt\r\n         */\r\n        onEvent: function (name, evt) {\r\n\r\n            var parent = evt.target ?? evt.detail.elt;\r\n\r\n            switch (name) {\r\n\r\n                // Try to remove hub connection when elements are removed\r\n                case \"htmx:beforeCleanupElement\":\r\n\r\n                    var internalData = api.getInternalData(parent)\r\n\r\n                    if (internalData.HubConnection != undefined) {\r\n                        internalData.HubConnection.stop();\r\n                    }\r\n                    return;\r\n\r\n                // Try to create hub connections when elements are processed\r\n                case \"htmx:beforeProcessNode\":\r\n\r\n                    forEach(queryAttributeOnThisOrChildren(parent, signalRConnect), function (child) {\r\n                        ensureHubConnection(child)\r\n                    });\r\n                    forEach(queryAttributeOnThisOrChildren(parent, signalRSubscribe), function (child) {\r\n                        ensureSubscription(child)\r\n                    });\r\n                    forEach(queryAttributeOnThisOrChildren(parent, signalRSend), function (child) {\r\n                        ensureSending(child)\r\n                    });\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * ensureHubConnection creates a new SignalR Hub Connection on the designated element, using\r\n     * the element's \"signalr-connect\" attribute.\r\n     * @param {HTMLElement} hubElt\r\n     * @returns\r\n     */\r\n    function ensureHubConnection(hubElt) {\r\n\r\n        // If the element containing the connection no longer exists, then\r\n        // do not connect/reconnect the Hub.\r\n        if (!api.bodyContains(hubElt)) {\r\n            return;\r\n        }\r\n        if (!signalR) {\r\n            logError('SignalR object not found. Make sure to include SignalR script in the page scripts before this extension.');\r\n            return;\r\n        }\r\n\r\n        // Get the source straight from the element's value\r\n        var signalrHubUrl = api.getAttributeValue(hubElt, signalRConnect)\r\n\r\n        // Create a new HubConnection and event handlers\r\n        /** @type {HubConnection} */\r\n        var hubConnection = htmx.createHubConnection(signalrHubUrl);\r\n        api.triggerEvent(hubElt, 'htmx:signalr:starting');\r\n\r\n        hubConnection.onreconnecting(function (error) {\r\n            api.triggerEvent(hubElt, 'htmx:signalr:reconnecting', { error: error });\r\n        });\r\n        hubConnection.onreconnected(function (connectionId) {\r\n            api.triggerEvent(hubElt, 'htmx:signalr:reconnected', { connectionId: connectionId });\r\n        });\r\n        hubConnection.onclose(function (error) {\r\n            api.triggerEvent(hubElt, 'htmx:signalr:close', { error: error });\r\n        });\r\n\r\n        hubConnection.start().then(function () {\r\n            api.triggerEvent(hubElt, 'htmx:signalr:start', { connectionId: hubConnection.connectionId })\r\n        }).catch(function (ex) {\r\n            api.triggerErrorEvent(hubElt, 'htmx:signalr:start-error', { message: ex.message, errorType: ex.errorType })\r\n        });\r\n\r\n        // Put the HubConnection into the HTML Element's custom data.\r\n        api.getInternalData(hubElt).HubConnection = hubConnection;\r\n    }\r\n\r\n    /**\r\n     * ensureSending attaches event listeners to elements with \"signalr-send\" attribute.\r\n     * @param {HTMLElement} elt\r\n     * @returns\r\n     */\r\n    function ensureSending(elt) {\r\n\r\n        // If the element containing the connection no longer exists, then\r\n        // do not connect/reconnect the Hub.\r\n        if (!api.bodyContains(elt)) {\r\n            return;\r\n        }\r\n        if (!signalR) {\r\n            logError('SignalR object not found. Make sure to include SignalR script in the page scripts before this extension.');\r\n            return;\r\n        }\r\n\r\n        var hubElement = findParentWithHubConnection(elt);\r\n\r\n        if (!hubElement) {\r\n            return;\r\n        }\r\n\r\n        processHubConnectionSend(hubElement, elt);\r\n    }\r\n\r\n    /**\r\n     * ensureMethodHandler creates a listener that handles invocations of a method defined on the element\r\n     * by \"signalr-method\" attribute.\r\n     * @param {HTMLElement} elt\r\n     * @returns\r\n     */\r\n    function ensureSubscription(elt) {\r\n\r\n        // If the element containing the connection no longer exists, then\r\n        // do not subscribe\r\n        if (!api.bodyContains(elt)) {\r\n            return;\r\n        }\r\n        if (!signalR) {\r\n            logError('SignalR object not found. Make sure to include SignalR script in the page scripts before this extension.');\r\n            return;\r\n        }\r\n\r\n        var hubElement = findParentWithHubConnection(elt);\r\n\r\n        if (!hubElement) {\r\n            return;\r\n        }\r\n\r\n        var hubConnection = api.getInternalData(hubElement).HubConnection;\r\n\r\n        var signalrSubscribeAttribute = api.getAttributeValue(elt, signalRSubscribe);\r\n        var signalrMethodNames = signalrSubscribeAttribute.split(\",\");\r\n\r\n        for (let i = 0; i < signalrMethodNames.length; i++) {\r\n            var method = signalrMethodNames[i].trim();\r\n\r\n            hubConnection.on(method, function handler(message) {\r\n                if (maybeCloseHubConnectionSource(hubElement)) {\r\n                    hubConnection.off(method, handler)\r\n                    return;\r\n                }\r\n\r\n                if (maybeUnsubscribe(hubElement, method, elt, handler)) {\r\n                    return;\r\n                }\r\n\r\n                var target = api.getTarget(elt);\r\n\r\n                var messageSpec = {\r\n                    message: message,\r\n                    method: method,\r\n                    target: target,\r\n                };\r\n                if (!api.triggerEvent(elt, 'htmx:signalr:message', messageSpec)) {\r\n                    return;\r\n                }\r\n\r\n                // Other parts of htmx expect to have response object as a string\r\n                // So, we serialize it\r\n                if (typeof (messageSpec.message) === \"object\") {\r\n                    messageSpec.message = JSON.stringify(messageSpec.message);\r\n                }\r\n\r\n                api.withExtensions(elt, function (extension) {\r\n                    messageSpec.message = extension.transformResponse(messageSpec.message, null, elt);\r\n                });\r\n\r\n                if (messageSpec.message === null || messageSpec.message === undefined) {\r\n                    return;\r\n                }\r\n\r\n                var swapSpec = api.getSwapSpecification(elt);\r\n                api.swap(messageSpec.target, messageSpec.message, swapSpec);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * processHubConnectionSend adds event listeners to the <form> element so that\r\n     * messages can be sent to the HubConnection server when the form is submitted.\r\n     * @param {HTMLElement} hubElt\r\n     * @param {HTMLElement} sendElt\r\n     */\r\n    function processHubConnectionSend(hubElt, sendElt) {\r\n        var nodeData = api.getInternalData(sendElt);\r\n        var triggerSpecs = api.getTriggerSpecs(sendElt);\r\n        triggerSpecs.forEach(function (ts) {\r\n            api.addTriggerHandler(sendElt, ts, nodeData, function (elt, evt) {\r\n                var HubConnection = api.getInternalData(hubElt).HubConnection;\r\n                var method = api.getAttributeValue(sendElt, signalRSend);\r\n                var headers = api.getHeaders(sendElt, hubElt);\r\n                var results = api.getInputValues(sendElt, 'post');\r\n                var errors = results.errors;\r\n                var rawParameters = Object.assign({}, results.values);\r\n                var expressionVars = api.getExpressionVars(sendElt);\r\n                var allParameters = api.mergeObjects(rawParameters, expressionVars);\r\n                var filteredParameters = api.filterValues(allParameters, sendElt);\r\n                filteredParameters['HEADERS'] = headers;\r\n                if (errors && errors.length > 0) {\r\n                    api.triggerEvent(sendElt, 'htmx:validation:halted', errors);\r\n                    return;\r\n                }\r\n\r\n                if (!api.triggerEvent(sendElt, 'htmx:signalr:beforeSend', { method: method, headers: headers, allParameters: allParameters, filteredParameters: filteredParameters })) {\r\n                    return;\r\n                };\r\n\r\n                HubConnection.send(method, filteredParameters);\r\n                if (api.shouldCancel(evt, sendElt)) {\r\n                    evt.preventDefault();\r\n                }\r\n\r\n                api.triggerEvent(sendElt, 'htmx:signalr:afterSend', { method: method, message: filteredParameters });\r\n\r\n            });\r\n        })\r\n    }\r\n\r\n    /**\r\n     * maybeCloseHubConnectionSource checks to the if the element that created the HubConnection\r\n     * still exists in the DOM.  If NOT, then the HubConnection is closed and this function\r\n     * returns TRUE.  If the element DOES EXIST, then no action is taken, and this function\r\n     * returns FALSE.\r\n     *\r\n     * @param {*} elt\r\n     * @returns\r\n     */\r\n    function maybeCloseHubConnectionSource(elt) {\r\n        if (!api.bodyContains(elt)) {\r\n            api.getInternalData(elt).HubConnection.stop();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * maybeUnsubscribe checks if the element that created the subscription to method\r\n     * still has matching subscription attribute. If NOT, then the subscription is removed and this function\r\n     * returns TRUE.  If the element DOES EXIST, then no action is taken, and this function\r\n     * returns FALSE.\r\n     *\r\n     * @param {*} elt\r\n     * @returns\r\n     */\r\n    function maybeUnsubscribe(hubElement, subscription, elt, handler) {\r\n        if (!api.bodyContains(elt)) {\r\n            api.getInternalData(hubElement).HubConnection.off(subscription, handler);\r\n            return true;\r\n        }\r\n        if (api.getAttributeValue(elt, signalRSubscribe).split(\",\").indexOf(subscription) == -1) {\r\n            api.getInternalData(hubElement).HubConnection.off(subscription, handler);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * createHubConnection is the default method for creating new HubConnection objects.\r\n     * it is hoisted into htmx.createHubConnection to be overridden by the user, if needed.\r\n     *\r\n     * @param {string} url\r\n     * @returns HubConnection\r\n     */\r\n    function createHubConnection(url) {\r\n        return new signalR.HubConnectionBuilder()\r\n            .withUrl(url)\r\n            .withAutomaticReconnect()\r\n            .build()\r\n    }\r\n\r\n    /**\r\n     * queryAttributeOnThisOrChildren returns all nodes that contain the requested attributeName, INCLUDING THE PROVIDED ROOT ELEMENT.\r\n     *\r\n     * @param {HTMLElement} elt\r\n     * @param {string} attributeName\r\n     */\r\n    function queryAttributeOnThisOrChildren(elt, attributeName) {\r\n\r\n        var result = []\r\n\r\n        // If the parent element also contains the requested attribute, then add it to the results too.\r\n        if (api.hasAttribute(elt, attributeName)) {\r\n            result.push(elt);\r\n        }\r\n\r\n        // Search all child nodes that match the requested attribute\r\n        elt.querySelectorAll(\"[\" + attributeName + \"], [data-\" + attributeName + \"]\").forEach(function (node) {\r\n            result.push(node)\r\n        })\r\n\r\n        return result\r\n    }\r\n\r\n    /**\r\n     * findParentWithHubConnection returns all nodes that contain the requested attributeName, INCLUDING THE PROVIDED ROOT ELEMENT.\r\n     *\r\n     * @param {HTMLElement} elt\r\n     */\r\n    function findParentWithHubConnection(elt) {\r\n        var match = api.getClosestMatch(elt, hasHubConnection);\r\n        return match;\r\n    }\r\n\r\n    function hasHubConnection(node) {\r\n        var internalData = api.getInternalData(node);\r\n        return internalData.HubConnection != null;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T[]} arr\r\n     * @param {(T) => void} func\r\n     */\r\n    function forEach(arr, func) {\r\n        if (arr) {\r\n            for (var i = 0; i < arr.length; i++) {\r\n                func(arr[i]);\r\n            }\r\n        }\r\n    }\r\n})();"],"names":["api","signalRConnect","signalRSubscribe","signalRSend","createHubConnection","url","signalR","HubConnectionBuilder","withUrl","withAutomaticReconnect","build","queryAttributeOnThisOrChildren","elt","attributeName","result","hasAttribute","push","querySelectorAll","forEach","node","findParentWithHubConnection","getClosestMatch","hasHubConnection","internalData","getInternalData","HubConnection","arr","func","i","length","htmx","defineExtension","init","apiRef","undefined","onEvent","name","evt","parent","target","detail","stop","child","ensureHubConnection","hubElt","bodyContains","logError","signalrHubUrl","getAttributeValue","hubConnection","triggerEvent","onreconnecting","error","onreconnected","connectionId","onclose","start","then","catch","ex","triggerErrorEvent","message","errorType","ensureSubscription","hubElement","signalrMethodNames","signalrSubscribeAttribute","split","method","trim","on","handler","off","subscription","indexOf","messageSpec","getTarget","JSON","stringify","withExtensions","extension","transformResponse","swapSpec","getSwapSpecification","swap","ensureSending","sendElt","nodeData","triggerSpecs","getTriggerSpecs","ts","addTriggerHandler","headers","getHeaders","results","getInputValues","errors","rawParameters","Object","assign","values","expressionVars","getExpressionVars","allParameters","mergeObjects","filteredParameters","filterValues","send","shouldCancel","preventDefault"],"mappings":"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"}