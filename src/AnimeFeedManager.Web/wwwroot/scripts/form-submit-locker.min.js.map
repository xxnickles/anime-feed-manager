{"version":3,"sources":["wwwroot/scripts/form-submit-locker.js"],"sourcesContent":["(() => {\n    // Utility function: debounce (delays execution until after wait ms of inactivity)\n    function debounce(func, wait) {\n        let timeout;\n        return function(...args) {\n            const context = this;\n            clearTimeout(timeout);\n            timeout = setTimeout(() => func.apply(context, args), wait);\n        };\n    }\n\n    // Utility function: throttle (ensures function is called at most once per wait ms)\n    function throttle(func, wait) {\n        let timeout;\n        let lastTime = 0;\n        return function(...args) {\n            const context = this;\n            const now = Date.now();\n            const remaining = wait - (now - lastTime);\n\n            if (remaining <= 0) {\n                clearTimeout(timeout);\n                lastTime = now;\n                func.apply(context, args);\n            } else if (!timeout) {\n                timeout = setTimeout(() => {\n                    lastTime = Date.now();\n                    func.apply(context, args);\n                }, remaining);\n            }\n        };\n    }\n\n    const pluginName = \"form-submit-locker\";\n\n    /**\n     * Alpine.js plugin: x-form-submit-locker\n     *\n     * Core functionality:\n     * - Disables the submit button when the form is invalid based on HTML5 constraints\n     * - Prevents browser-native validation popups by setting novalidate\n     * - Updates button state on input, select, form reset, and browser navigation\n     * - Warns and opts-out if multiple submit buttons are detected\n     * - Configurable debounce delay via modifiers\n     *\n     * Relies on browser's built-in :valid/:invalid pseudo-classes for styling\n     */\n    function plugin_default(Alpine) {\n        const FORM_TAG = \"FORM\";\n        const DEFAULT_DEBOUNCE_DELAY = 300;\n\n        Alpine.directive(pluginName, (el, { modifiers, expression }, { cleanup, evaluate }) => {\n            // Ensure the directive is only applied to <form> elements\n            if (el.tagName !== FORM_TAG) {\n                console.error(`[x-${pluginName}] Directive must be used on <form> elements only.`);\n                return;\n            }\n\n            // Parse configuration from modifiers or expression\n            const config = {\n                debounceDelay: parseInt(modifiers[0]) || DEFAULT_DEBOUNCE_DELAY,\n                validateOnMount: !modifiers.includes('no-initial-validation'),\n                disableOnSubmit: modifiers.includes('disable-on-submit'),\n                allowMultipleSubmits: modifiers.includes('allow-multiple-submits'),\n                focusOnError: !modifiers.includes('no-focus-on-error'),\n                changeTextOnSubmit: modifiers.includes('change-text'),\n                customValidator: expression ? () => evaluate(expression) : null\n            };\n\n            // Find all submit buttons within the form\n            const submitButtons = Array.from(el.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"], button:not([type])')).filter(btn => {\n                // Filter out buttons that are explicitly not submit buttons\n                const type = btn.getAttribute('type');\n                return type === 'submit' || (btn.tagName === 'BUTTON' && !type);\n            });\n\n            // Check for multiple submit buttons and warn/opt-out\n            if (submitButtons.length > 1 && !config.allowMultipleSubmits) {\n                console.warn(\n                    `[x-${pluginName}] Multiple submit buttons detected in form. This often indicates a UX issue that could be better solved with:\\n` +\n                    `- Separate forms for different actions\\n` +\n                    `- A single submit with radio/select for action type\\n` +\n                    `- JavaScript-driven workflow buttons\\n\\n` +\n                    `The form submit locker has been disabled for this form.\\n` +\n                    `If you really need multiple submit buttons, add the 'allow-multiple-submits' modifier:\\n` +\n                    `<form x-${pluginName}.allow-multiple-submits>\\n\\n` +\n                    `Form element:`, el\n                );\n                return; // Opt-out of applying the plugin\n            }\n\n            if (submitButtons.length === 0) {\n                console.warn(`[x-${pluginName}] No submit buttons found in form.`);\n                return;\n            }\n\n            // Get the single submit button\n            const submitButton = submitButtons[0];\n\n            // Store original disabled state to restore it properly\n            const originalDisabledState = submitButton.disabled;\n\n            // Disable browser-based validation UI (popups) for this form\n            el.setAttribute(\"novalidate\", true);\n\n            /**\n             * Evaluates the form's validity\n             * @returns {boolean} True if form is valid\n             */\n            function isFormValid() {\n                // Check HTML5 constraint validation\n                let isValid = el.checkValidity();\n\n                // Apply custom validator if provided\n                if (config.customValidator) {\n                    try {\n                        const customResult = config.customValidator();\n                        isValid = isValid && customResult;\n                    } catch (e) {\n                        console.error(`[x-${pluginName}] Custom validator error:`, e);\n                    }\n                }\n\n                return isValid;\n            }\n\n            /**\n             * Evaluates the form's validity and toggles the disabled state of submit button\n             */\n            function evaluateSubmit() {\n                const isValid = isFormValid();\n\n                Alpine.nextTick(() => {\n                    // Only modify disabled state if it wasn't originally disabled\n                    if (!originalDisabledState) {\n                        submitButton.disabled = !isValid;\n\n                        // Set aria-disabled for better accessibility\n                        if (isValid) {\n                            submitButton.removeAttribute('aria-disabled');\n                        } else {\n                            submitButton.setAttribute('aria-disabled', 'true');\n                        }\n                    }\n                });\n            }\n\n            // Debounced handler for text input events\n            const inputHandler = debounce((event) => {\n                if (['INPUT', 'TEXTAREA'].includes(event.target.tagName)) {\n                    evaluateSubmit();\n                }\n            }, config.debounceDelay);\n\n            // Immediate handler for select changes\n            const changeHandler = (event) => {\n                if (event.target.tagName === 'SELECT') {\n                    evaluateSubmit();\n                }\n            };\n\n            // Handler for form reset\n            const resetHandler = (event) => {\n                if (event.target === el) {\n                    // Re-evaluate after a tick to allow form to reset\n                    setTimeout(() => evaluateSubmit(), 0);\n                }\n            };\n\n            // Track submission state\n            let isSubmitting = false;\n\n            /**\n             * Resets the submit button to its normal state after submission\n             */\n            function resetSubmitButton() {\n                if (!isSubmitting) return;\n\n                isSubmitting = false;\n                submitButton.removeAttribute('aria-busy');\n\n                // Restore original text if it was changed\n                if (config.changeTextOnSubmit && submitButton.dataset.originalText) {\n                    submitButton.textContent = submitButton.dataset.originalText;\n                    delete submitButton.dataset.originalText;\n                }\n\n                // Re-evaluate form validity for button states\n                evaluateSubmit();\n            }\n\n            // Handler for form submission\n            const submitHandler = (event) => {\n                const isValid = isFormValid();\n\n                if (!isValid) {\n                    event.preventDefault();\n                    event.stopPropagation();\n\n                    // Focus first invalid field if configured\n                    if (config.focusOnError) {\n                        // Use the browser's built-in :invalid selector\n                        const firstInvalid = el.querySelector(':invalid:not([type=\"hidden\"]):not([disabled])');\n                        if (firstInvalid) {\n                            firstInvalid.focus();\n                            firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });\n                        }\n                    }\n\n                    // Announce to screen readers\n                    const announcement = document.createElement('div');\n                    announcement.setAttribute('role', 'alert');\n                    announcement.setAttribute('aria-live', 'polite');\n                    announcement.style.position = 'absolute';\n                    announcement.style.left = '-10000px';\n                    announcement.style.width = '1px';\n                    announcement.style.height = '1px';\n                    announcement.style.overflow = 'hidden';\n                    announcement.textContent = 'Form validation failed. Please check the required fields.';\n                    el.appendChild(announcement);\n                    setTimeout(() => announcement.remove(), 1000);\n                } else if (config.disableOnSubmit) {\n                    // For non-HTMX forms, disable immediately\n                    // For HTMX forms, we'll handle this in htmx:beforeRequest\n                    const hasHtmxAttributes = el.hasAttribute('hx-post') ||\n                        el.hasAttribute('hx-put') ||\n                        el.hasAttribute('hx-patch') ||\n                        el.hasAttribute('hx-delete') ||\n                        el.hasAttribute('hx-get');\n\n                    if (!hasHtmxAttributes) {\n                        isSubmitting = true;\n\n                        // Disable submit button during submission\n                        submitButton.disabled = true;\n                        submitButton.setAttribute('aria-busy', 'true');\n\n                        // Only change text if explicitly configured\n                        if (config.changeTextOnSubmit && submitButton.tagName === 'BUTTON' && !submitButton.dataset.originalText) {\n                            submitButton.dataset.originalText = submitButton.textContent;\n                            submitButton.textContent = submitButton.dataset.loadingText || 'Submitting...';\n                        }\n                    }\n                    // For HTMX forms, don't disable here - wait for confirmation\n                }\n            };\n\n            // HTMX-specific handlers\n            const htmxConfirmHandler = (event) => {\n                // Check if this is our form or a child element\n                if (event.detail.elt === el || el.contains(event.detail.elt)) {\n                    // Just track that a confirmation was triggered\n                    // We'll monitor if a request follows or not\n\n                    // Add a listener for the issueRequest callback if it exists\n                    const originalIssueRequest = event.detail.issueRequest;\n                    if (typeof originalIssueRequest === 'function') {\n                        event.detail.issueRequest = function(proceed) {\n                            // Call the original\n                            originalIssueRequest(proceed);\n\n                            // If user cancelled, reset button state\n                            if (!proceed && submitButton.disabled && !originalDisabledState) {\n                                resetSubmitButton();\n                            }\n                        };\n                    }\n                }\n            };\n\n            const htmxBeforeRequestHandler = (event) => {\n                if (event.detail.elt === el || el.contains(event.detail.elt)) {\n                    // Only disable if not already submitting (avoids double-disable)\n                    if (config.disableOnSubmit && !isSubmitting) {\n                        isSubmitting = true;\n                        submitButton.disabled = true;\n                        submitButton.setAttribute('aria-busy', 'true');\n\n                        // Only change text if explicitly configured\n                        if (config.changeTextOnSubmit && submitButton.tagName === 'BUTTON' && !submitButton.dataset.originalText) {\n                            submitButton.dataset.originalText = submitButton.textContent;\n                            submitButton.textContent = submitButton.dataset.loadingText || 'Submitting...';\n                        }\n                    }\n                }\n            };\n\n            const htmxAfterRequestHandler = (event) => {\n                if (event.detail.elt === el || el.contains(event.detail.elt)) {\n                    resetSubmitButton();\n                }\n            };\n\n            // Handler for when form submission is cancelled (including by confirmation)\n            const htmxHaltedHandler = (event) => {\n                if (event.detail.elt === el || el.contains(event.detail.elt)) {\n                    // Request was halted, reset button if it was disabled\n                    if (isSubmitting) {\n                        resetSubmitButton();\n                    }\n                }\n            };\n\n            // Listen for HTMX events if HTMX is present\n            if (window.htmx || document.querySelector('[hx-boost], [hx-get], [hx-post], [hx-put], [hx-patch], [hx-delete]')) {\n                // IMPORTANT: htmx:confirm must be registered BEFORE htmx:beforeRequest\n                document.body.addEventListener('htmx:confirm', htmxConfirmHandler);\n                document.body.addEventListener('htmx:beforeRequest', htmxBeforeRequestHandler);\n                document.body.addEventListener('htmx:afterRequest', htmxAfterRequestHandler);\n                // Also listen for response errors\n                document.body.addEventListener('htmx:responseError', htmxAfterRequestHandler);\n                document.body.addEventListener('htmx:sendError', htmxAfterRequestHandler);\n                // Listen for halted events (includes cancelled confirmations)\n                document.body.addEventListener('htmx:halted', htmxHaltedHandler);\n            }\n\n            // Handler for browser navigation (back/forward)\n            const popStateHandler = throttle(() => {\n                // Re-evaluate form state after navigation\n                setTimeout(() => evaluateSubmit(), 100);\n            }, 500);\n\n            // Attach event listeners\n            el.addEventListener('input', inputHandler, true);\n            el.addEventListener('change', changeHandler, true);\n            el.addEventListener('reset', resetHandler, true);\n            el.addEventListener('submit', submitHandler, true);\n            window.addEventListener('popstate', popStateHandler);\n\n            // Initial evaluation\n            if (config.validateOnMount) {\n                // Delay initial validation to ensure Alpine is fully initialized\n                Alpine.nextTick(() => evaluateSubmit());\n            }\n\n            // Alpine event handlers for AJAX submissions\n            const alpineSubmitSuccessHandler = () => {\n                resetSubmitButton();\n            };\n\n            const alpineSubmitErrorHandler = () => {\n                resetSubmitButton();\n            };\n\n            // Listen for Alpine/custom events that might indicate AJAX submission\n            el.addEventListener('ajax:success', alpineSubmitSuccessHandler);\n            el.addEventListener('ajax:error', alpineSubmitErrorHandler);\n            el.addEventListener('submit:success', alpineSubmitSuccessHandler);\n            el.addEventListener('submit:error', alpineSubmitErrorHandler);\n\n            // Expose API for programmatic control\n            el._formSubmitLocker = {\n                validate: () => isFormValid(),\n                evaluateSubmit: () => evaluateSubmit(),\n                reset: () => {\n                    el.reset();\n                    evaluateSubmit();\n                },\n                // Manual unlock for custom AJAX implementations\n                unlock: () => resetSubmitButton()\n            };\n\n            // Cleanup function\n            cleanup(() => {\n                el.removeEventListener('input', inputHandler, true);\n                el.removeEventListener('change', changeHandler, true);\n                el.removeEventListener('reset', resetHandler, true);\n                el.removeEventListener('submit', submitHandler, true);\n                window.removeEventListener('popstate', popStateHandler);\n\n                // Clean up HTMX listeners if they were added\n                if (window.htmx || document.querySelector('[hx-boost], [hx-get], [hx-post], [hx-put], [hx-patch], [hx-delete]')) {\n                    document.body.removeEventListener('htmx:confirm', htmxConfirmHandler);\n                    document.body.removeEventListener('htmx:beforeRequest', htmxBeforeRequestHandler);\n                    document.body.removeEventListener('htmx:afterRequest', htmxAfterRequestHandler);\n                    document.body.removeEventListener('htmx:responseError', htmxAfterRequestHandler);\n                    document.body.removeEventListener('htmx:sendError', htmxAfterRequestHandler);\n                    document.body.removeEventListener('htmx:halted', htmxHaltedHandler);\n                }\n\n                // Clean up Alpine/AJAX event listeners\n                el.removeEventListener('ajax:success', alpineSubmitSuccessHandler);\n                el.removeEventListener('ajax:error', alpineSubmitErrorHandler);\n                el.removeEventListener('submit:success', alpineSubmitSuccessHandler);\n                el.removeEventListener('submit:error', alpineSubmitErrorHandler);\n\n                // Restore original disabled state\n                if (originalDisabledState !== undefined) {\n                    submitButton.disabled = originalDisabledState;\n                }\n\n                // Restore original button text if it was changed\n                if (config.changeTextOnSubmit && submitButton.dataset.originalText) {\n                    submitButton.textContent = submitButton.dataset.originalText;\n                    delete submitButton.dataset.originalText;\n                }\n\n                // Clean up API\n                delete el._formSubmitLocker;\n            });\n        });\n    }\n\n    // Register the plugin when Alpine initializes\n    document.addEventListener(\"alpine:init\", () => {\n        window.Alpine.plugin(plugin_default);\n    });\n\n    // Auto-register if Alpine is already initialized\n    if (window.Alpine) {\n        window.Alpine.plugin(plugin_default);\n    }\n})();"],"names":["pluginName","plugin_default","Alpine","directive","el","modifiers","expression","cleanup","evaluate","func","wait","timeout","lastTime","tagName","console","error","config","debounceDelay","parseInt","validateOnMount","includes","disableOnSubmit","allowMultipleSubmits","focusOnError","changeTextOnSubmit","customValidator","submitButtons","Array","from","querySelectorAll","filter","btn","type","getAttribute","length","warn","submitButton","originalDisabledState","disabled","isFormValid","isValid","checkValidity","customResult","e","evaluateSubmit","nextTick","removeAttribute","setAttribute","inputHandler","event","target","args","context","clearTimeout","setTimeout","apply","changeHandler","resetHandler","isSubmitting","resetSubmitButton","dataset","originalText","textContent","submitHandler","hasAttribute","loadingText","preventDefault","stopPropagation","firstInvalid","querySelector","focus","scrollIntoView","behavior","block","announcement","document","createElement","style","position","left","width","height","overflow","appendChild","remove","htmxConfirmHandler","detail","elt","contains","originalIssueRequest","issueRequest","proceed","htmxBeforeRequestHandler","htmxAfterRequestHandler","htmxHaltedHandler","window","htmx","body","addEventListener","popStateHandler","now","Date","remaining","alpineSubmitSuccessHandler","alpineSubmitErrorHandler","_formSubmitLocker","validate","reset","unlock","removeEventListener","undefined","plugin"],"mappings":"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"}