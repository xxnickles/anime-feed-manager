<article id="chart-@ChartId"
         class="card bg-base-100 shadow-lg min-w-0"
         hx-get="@Endpoint"
         hx-trigger="@GetTrigger()"
         hx-swap="innerHTML"
         hx-ext="event-params"
         data-param-name="@ParamName">
    <div class="card-body">
        <header>
            <div class="skeleton h-6 w-32" aria-hidden="true"></div>
        </header>
        <div class="h-64 flex items-center justify-center" role="status" aria-label="Loading chart">
            <span class="loading loading-spinner loading-lg"></span>
        </div>
    </div>
</article>

@code {
    [Parameter, EditorRequired] public required string ChartId { get; set; }
    [Parameter, EditorRequired] public required string Endpoint { get; set; }
    [Parameter] public string? TriggerEvent { get; set; }
    [Parameter] public string ParamName { get; set; } = "period";

    private string GetTrigger() => string.IsNullOrEmpty(TriggerEvent)
        ? "load"
        : $"load, {TriggerEvent} from:body";
}
